"use strict";(self.webpackChunkngx_sub_form_demo=self.webpackChunkngx_sub_form_demo||[]).push([[306],{6316:(I,O,n)=>{n.d(O,{QD:()=>bt,dm:()=>L,Us:()=>yt,R1:()=>_,rU:()=>tt,Np:()=>Dt,CB:()=>$});var l=n(2559),c=n.n(l),d=n(1135),y=n(7579),m=n(9300),F=n(8505),p=n(4006);const S=Symbol("ngx-observable-lifecycle-hooks"),E=Symbol("ngx-observable-lifecycle-hooks-decorator");function C(r){return new Proxy({},{get:(e,t)=>function P(r,e){r[S]||(r[S]={}),r[S][e]||(r[S][e]=new y.x);const t=r.constructor.prototype;if(t[E]||(t[E]={}),!t[E][e]){const o=t[e];t[e]=function(){o?.call(this),this[S]?.[e]?.next()};const i=t.ngOnDestroy;t.ngOnDestroy=function(){i?.call(this),this[S]?.[e]?.complete(),delete this[S]?.[e]},t[E][e]=!0}return r[S][e]}(r,t).asObservable()})}var R=n(5963),A=n(4482),x=n(5032),f=n(5403),g=n(8421),D=n(2722);function $(r){return[{provide:p.JU,useExisting:r,multi:!0},{provide:p.Cf,useExisting:r,multi:!0}]}const mt=r=>`"${r}"`;class dt extends Error{constructor(e){super(`Attempt to update the form value with an object that doesn't contains some of the required form control keys.\nMissing: ${e.map(mt).join(", ")}`)}}function J(r){const{ngOnDestroy:e}=C(r);return t=>t.pipe((0,D.R)(e))}function V(r){return null==r}var M=n(6451),W=n(8675),N=n(4004),pt=n(4986),Y=n(7272),B=n(5698),Z=n(9718),gt=n(5577);function Q(r,e){return e?t=>(0,Y.z)(e.pipe((0,B.q)(1),function ht(){return(0,A.e)((r,e)=>{r.subscribe((0,f.x)(e,x.Z))})}()),t.pipe(Q(r))):(0,gt.z)((t,o)=>r(t,o).pipe((0,B.q)(1),(0,Z.h)(t)))}function U(r,e=pt.z){const t=(0,R.H)(r,e);return Q(()=>t)}var k=n(4671),vt=n(3269);function q(...r){const e=(0,vt.jO)(r);return(0,A.e)((t,o)=>{const i=r.length,a=new Array(i);let s=r.map(()=>!1),u=!1;for(let h=0;h<i;h++)(0,g.Xf)(r[h]).subscribe((0,f.x)(o,b=>{a[h]=b,!u&&!s[h]&&(s[h]=!0,(u=s.every(k.y))&&(s=null))},x.Z));t.subscribe((0,f.x)(o,h=>{if(u){const b=[h,...a];o.next(e?e(...b):b)}}))})}var T=n(4650);let _=(()=>{class r{constructor(){this.controlKeys=[],this.formGroup=new p.nJ(this._getFormControls(),this.getFormGroupControlOptions()),this.onChange=void 0,this.onTouched=void 0,this.emitNullOnDestroy=!0,this.emitInitialValueOnInit=!0,this.subscription=void 0,this.controlDisabled=!1;const t=this.getDefaultValues();t&&this.formGroup.reset(t,{emitEvent:!1}),setTimeout(()=>{this.formGroup&&(this.formGroup.updateValueAndValidity({emitEvent:!1}),this.controlDisabled&&this.formGroup.disable())},0)}get formGroupControls(){return this.formGroup?this.formGroup.controls:null}get formGroupValues(){return this.mapControls(t=>t.value)}get formGroupErrors(){const t=this.mapControls(o=>o.errors,(o,i,a)=>!!a||o.invalid,!0);return this.formGroup.errors||t&&Object.keys(t).length?Object.assign({},this.formGroup.errors?{formGroup:this.formGroup.errors}:{},t):null}get formControlNames(){return this.mapControls((t,o)=>o,()=>!0,!1)}_getFormControls(){const t=this.getFormControls();return this.controlKeys=Object.keys(t),t}mapControls(t,o=(()=>!0),i=!0){if(!this.formGroup)return null;const a=this.formGroup.controls,s={};for(const u in a)if(this.formGroup.controls.hasOwnProperty(u)){const h=a[u];if(i&&h instanceof p.vC){const b=[];for(let w=0;w<h.length;w++)o(h.at(w),u,!0)&&b.push(t(h.at(w),u));b.length>0&&b.some(w=>!V(w))&&(s[u]=b)}else h&&o(h,u,!1)&&(s[u]=t(h,u))}return s}onFormUpdate(t){}getFormGroupControlOptions(){return{}}validate(){return!this.formGroup||this.formGroup.valid?null:this.formGroupErrors}ngOnDestroy(){this.formGroup=void 0,this.subscription&&this.subscription.unsubscribe(),this.emitNullOnDestroy&&this.onChange&&this.onChange(null),this.onChange=void 0}getDefaultValues(){return null}writeValue(t){if(!this.formGroup)return;const o=this.getDefaultValues(),i=this.transformToFormGroup(void 0===t?null:t,o);if(V(i))this.formGroup.reset(null===o?void 0:o,{emitEvent:!1});else{const a=this.getMissingKeys(i);if(a.length>0)throw new dt(a);this.handleFormArrayControls(i);const s=this.formGroup.disabled;this.formGroup.setValue(i,{emitEvent:!1}),s&&this.formGroup.disable()}this.formGroup.markAsPristine(),this.formGroup.markAsUntouched()}handleFormArrayControls(t){Object.entries(t).forEach(([o,i])=>{if(this.formGroup.get(o)instanceof p.vC&&Array.isArray(i)){const a=this.formGroup.get(o);for(;a.length>i.length;)a.removeAt(a.length-1);for(let s=a.length;s<i.length;s++)this.formIsFormWithArrayControls()?a.insert(s,this.createFormArrayControl(o,i[s])):a.insert(s,new p.p4(i[s]))}})}formIsFormWithArrayControls(){return"function"==typeof this.createFormArrayControl}getMissingKeys(t){return this.controlKeys.reduce((i,a)=>((V(t)||void 0===t[a])&&i.push(a),i),[])}handleEmissionRate(){return t=>t}transformToFormGroup(t,o){return t}transformFromFormGroup(t){return t}registerOnChange(t){if(!this.formGroup)return;this.onChange=t;const i=Object.keys(this.formControlNames).map(s=>this.formGroup.controls[s].valueChanges.pipe((0,W.O)(this.formGroup.controls[s].value),(0,N.U)(u=>({key:s,value:u})))),a=(0,M.T)(...i.map(s=>s.pipe((0,N.U)(u=>u.key))));this.subscription=this.formGroup.valueChanges.pipe(this.handleEmissionRate(),(0,W.O)(this.formGroup.value),U(0),(0,m.h)(()=>!!this.formGroup),q(a),(0,N.U)(([s,u],h)=>{if(h>0&&this.onTouched&&this.onTouched(),h>0||0===h&&this.emitInitialValueOnInit){this.onChange&&this.onChange(this.transformFromFormGroup(this.formGroup.value));const b={};b[u]=!0,this.onFormUpdate(b)}})).subscribe()}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.controlDisabled=!!t,this.formGroup&&(t?this.formGroup.disable({emitEvent:!1}):this.formGroup.enable({emitEvent:!1}))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=T.lG2({type:r}),r})(),tt=(()=>{class r extends _{}return r.\u0275fac=function(){let e;return function(o){return(e||(e=T.n5z(r)))(o||r)}}(),r.\u0275dir=T.lG2({type:r,features:[T.qOj]}),r})(),yt=(()=>{class r extends tt{constructor(){super(...arguments),this.dataInput$=new d.X(null),this._dataOutput$=new y.x,this.emitInitialValueOnInit=!1,this.emitNullOnDestroy=!1,this.dataValue=null}set disabled(t){this.setDisabledState(t)}ngOnInit(){this.registerOnChange(t=>this.onRegisterOnChangeHook(t)),this.dataInput$.pipe((0,m.h)(t=>!c()(t,this.formGroup.value)),(0,F.b)(t=>{V(t)||this.writeValue(t)}),J(this)).subscribe(),this._dataOutput$.pipe((0,m.h)(()=>this.formGroup.valid),(0,F.b)(t=>this.dataOutput.emit(t)),J(this)).subscribe()}onRegisterOnChangeHook(t){return!this.formGroup.invalid&&!c()(t,this.dataInput$.value)&&(this.dataValue=t,!0)}dataInputUpdated(t){this.dataInput$.next(t)}writeValue(t){this.dataValue=t,super.writeValue(t)}transformToFormGroup(t,o){return t}transformFromFormGroup(t){return t}manualSave(){!V(this.dataValue)&&this.formGroup.valid&&this._dataOutput$.next(this.dataValue)}}return r.\u0275fac=function(){let e;return function(o){return(e||(e=T.n5z(r)))(o||r)}}(),r.\u0275dir=T.lG2({type:r,inputs:{disabled:"disabled"},features:[T.qOj]}),r})();class Ct extends Error{constructor(e){super(`You're trying to apply the "DataInput" decorator on a property called "${e}". That decorator should only be used on a property called "dataInput"`)}}function bt(){return function(r,e){if("dataInput"!==e)throw new Ct(e);Object.defineProperty(r,e,{set:function(t){this.dataInputUpdated(t)}})}}var et=n(9646),rt=n(515),Ot=n(9841),Ft=n(6063);class j extends y.x{constructor(e=1/0,t=1/0,o=Ft.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:o,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:s}=this;t||(o.push(e),!i&&o.push(a.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:i}=this,a=i.slice();for(let s=0;s<a.length&&!e.closed;s+=o?1:2)e.next(a[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<o.length&&o.splice(0,o.length-a),!i){const s=t.now();let u=0;for(let h=1;h<o.length&&o[h]<=s;h+=2)u=h;u&&o.splice(0,u+1)}}}var St=n(3099);function ot(r,e,t){let o,i=!1;return r&&"object"==typeof r?({bufferSize:o=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=r):o=r??1/0,(0,St.B)({connector:()=>new j(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var X=n(3900);const nt=(r,e)=>{Object.entries(e).forEach(([t,o])=>{r[t]=o})},st=r=>{const e=Object.entries(r.controls).reduce((t,[o,i])=>{if(i.errors&&(t[o]=i.errors),i instanceof p.vC){const a={};for(let s=0;s<i.length;s++){const u=i.at(s).errors;u&&(a[s]=u)}if(Object.values(a).length>0){const s=t;o in s||(s[o]={}),Object.assign(s[o],a)}}return t},{});return r.errors||Object.values(e).length?Object.assign({},r.errors?{formGroup:r.errors}:{},e):null};var L=(()=>{return(r=L||(L={})).SUB="Sub",r.ROOT="Root",L;var r})();const K=r=>r.formType===L.ROOT;function Dt(r,e){const{formGroup:t,defaultValues:o,formControlNames:i,formArrays:a}=function Rt(r){const e=new p.nJ(r.formControls,r.formGroupOptions),t=(r=>JSON.parse(JSON.stringify(r)))(e.value),o=Object.keys(t),i=o.reduce((s,u)=>(s[u]=u,s),{}),a=o.reduce((s,u)=>{const h=e.get(u);return h instanceof p.vC&&s.push({key:u,control:h}),s},[]);return{formGroup:e,defaultValues:t,formControlNames:i,formArrays:a}}(e);let s=!1;const u=e.componentHooks??{onDestroy:C(r).ngOnDestroy,afterViewInit:C(r).ngAfterViewInit};u.onDestroy.pipe((0,B.q)(1)).subscribe(()=>{s=!0}),nt(r,{validate:()=>s||t.valid?null:st(t)});const h=(0,R.H)(0),b=(r=>{const e=new j(1),t=new j(1),o=new j(1),i=new j(1);return nt(r,{writeValue:s=>{e.next(s)},registerOnChange:s=>{t.next(s)},registerOnTouched:s=>{o.next(s)},setDisabledState:s=>{i.next(!!s)}}),{writeValue$:e.asObservable(),registerOnChange$:t.asObservable(),registerOnTouched$:o.asObservable(),setDisabledState$:i.asObservable()}})(r),w=K(e)?e.input$.pipe((0,W.O)(null)):b.writeValue$,it=K(e)?(0,et.of)(v=>{!v||e.output$.next(v)}):b.registerOnChange$,at=K(e)?e.disabled$??(0,et.of)(!1):b.setDisabledState$,ut=w.pipe((0,N.U)(v=>V(v)?o:e.toFormGroup?e.toFormGroup(v):v),ot({refCount:!0,bufferSize:1})),lt=ut.pipe((0,X.w)(v=>K(e)?(e.manualSave$?e.manualSave$.pipe(q(t.valueChanges),(0,N.U)(([z,Tt])=>Tt)):t.valueChanges).pipe((0,m.h)(()=>t.valid),U(0),(0,m.h)(z=>!t.invalid&&(e.outputFilterPredicate?e.outputFilterPredicate(v,z):!c()(v,z))),e.handleEmissionRate??k.y):t.valueChanges.pipe(U(0))),(0,N.U)(v=>e.fromFormGroup?e.fromFormGroup(v):v)),ft=(0,M.T)(w,lt).pipe(ot({bufferSize:1,refCount:!0})),wt=V(e.emitNullOnDestroy)||e.emitNullOnDestroy?u.onDestroy.pipe((0,Z.h)(null)):rt.E,ct=(r=>!!r.createFormArrayControl)(e)&&e.createFormArrayControl?e.createFormArrayControl:(v,H)=>new p.p4(H),It={broadcastValueToParent$:it.pipe((0,X.w)(v=>lt.pipe((0,F.b)(H=>v(H))))),applyUpstreamUpdateOnLocalForm$:ut.pipe((0,F.b)(v=>{((r,e,t)=>{!r.length||r.forEach(({key:o,control:i})=>{const a=e[o];if(Array.isArray(a)){for(;i.length>a.length;)i.removeAt(i.length-1);for(let s=i.length;s<a.length;s++){const u=t(o,a[s]);i.disabled&&u.disable(),i.insert(s,u)}}})})(a,v,ct),t.reset(v,{emitEvent:!1})})),supportChangeDetectionStrategyOnPush:(0,Y.z)(u.afterViewInit.pipe((0,B.q)(1)),(0,M.T)(ft,at).pipe(U(0),(0,F.b)(()=>{(0,T.Rx$)(r)}))),setDisabledState$:at.pipe((0,F.b)(v=>{v?t.disable({emitEvent:!1}):t.enable({emitEvent:!1})})),updateValue$:h.pipe((0,F.b)(()=>{t.updateValueAndValidity({emitEvent:!1})})),bindTouched$:(0,Ot.a)([b.registerOnTouched$,e.touched$??rt.E]).pipe(U(0),(0,F.b)(([v])=>v()))};return(0,M.T)(...Object.values(It)).pipe((0,D.R)(u.onDestroy)).subscribe(),it.pipe((0,X.w)(v=>wt.pipe((0,F.b)(H=>v(H)))),(0,D.R)(u.onDestroy.pipe(U(0)))).subscribe(),{formGroup:t,formControlNames:i,get formGroupErrors(){return st(t)},createFormArrayControl:ct,controlValue$:ft}}},4879:(I,O,n)=>{n.d(O,{HB:()=>l,XC:()=>d,_m:()=>y,lI:()=>c});var l=(()=>{return(m=l||(l={})).PROTOCOL="Protocol",m.MEDICAL="Medical",m.ASTROMECH="Astromech",m.ASSASSIN="Assassin",l;var m})(),c=(()=>{return(m=c||(c={})).DROIDSPEAK="Droidspeak",m.EWOKESE="Ewokese",m.HUTTESE="Huttese",m.JAWAESE="Jawaese",m.SITH="Sith",m.SHYRIIWOOK="Shyriiwook",c;var m})(),d=(()=>{return(m=d||(d={})).REGULAR="Regular",m.SPHERE="Sphere",d;var m})(),y=(()=>{return(m=y||(y={})).SABER="Saber",m.FLAME_THROWER="FlameThrower",m.GUN="Gun",m.AXE="Axe",y;var m})()},6482:(I,O,n)=>{n.d(O,{I:()=>l});var l=(()=>{return(c=l||(l={})).VEHICLE="Vehicle",c.DROID="Droid",l;var c})()},3246:(I,O,n)=>{n.d(O,{F:()=>l});var l=(()=>{return(c=l||(l={})).SPACESHIP="Spaceship",c.SPEEDER="Speeder",l;var c})()},2422:(I,O,n)=>{n.d(O,{o:()=>S});var l=n(1135),c=n(6482),d=n(4879),y=n(3246);const m=[{id:"3f71b7eb-4a4f-40e6-9fca-e8cc7c0199c3",price:45e6,title:"Millenium Falcon",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/4/43/MillenniumFalconTFA-Fathead.png/revision/latest/scale-to-width-down/1000?cb=20161110011442",listingType:c.I.VEHICLE,product:{color:"#cec80d",canFire:!0,crewMembers:[{firstName:"Obi-Wan",lastName:"Kenobi"},{firstName:"R2",lastName:"D2"}],wingCount:0,vehicleType:y.F.SPACESHIP}},{id:"c01ad30c-d686-4db2-9a3c-6cf91c494bf0",price:5e5,title:"X-34 landspeeder",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/5/54/X34-landspeeder.jpg/revision/latest?cb=20080316031428",listingType:c.I.VEHICLE,product:{color:"#2468f7",canFire:!0,crewMembers:[{firstName:"Anakin",lastName:"Skywalker"}],vehicleType:y.F.SPEEDER,maximumSpeed:250}},{id:"99178909-7db2-4b75-99e5-028b2d4f6755",price:15e4,title:"C-3PO Protocol Droid",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/5/51/C-3PO_EP3.png/revision/latest?cb=20131005124036",listingType:c.I.DROID,product:{color:"#b38d03",name:"Proto",droidType:d.HB.PROTOCOL,spokenLanguages:[d.lI.DROIDSPEAK,d.lI.HUTTESE]}},{id:"8aa98e18-838c-4a19-975e-2366c2566544",price:21e4,title:"2-1B Medial Droid",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/b/b6/2-1B_negtd.jpg/revision/latest/scale-to-width-down/200?cb=20100616170941",listingType:c.I.DROID,product:{color:"#07c911",name:"Medic",droidType:d.HB.MEDICAL,canHealHumans:!0,canFixRobots:!0}},{id:"08c2c071-f03e-4a63-93b7-bd3df0f2987c",price:215e3,title:"R2D2 Astromech Droid",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/e/eb/ArtooTFA2-Fathead.png/revision/latest/scale-to-width-down/1000?cb=20161108040914",listingType:c.I.DROID,product:{color:"#ff0a0a",name:"Test",droidType:d.HB.ASTROMECH,toolCount:15,shape:d.XC.REGULAR}},{id:"0258166e-13b5-4580-a63b-7c1914ef660f",price:35e4,title:"K2-S0 Security Droid",imageUrl:"https://vignette.wikia.nocookie.net/starwars/images/f/fd/K-2SO_Sideshow.png/revision/latest?cb=20170302003128",listingType:c.I.DROID,product:{color:"#cc6969",name:"acwer fg",droidType:d.HB.ASSASSIN,weapons:[d._m.AXE,d._m.FLAME_THROWER]}}];var F=n(4004),p=n(4650);let S=(()=>{class E{constructor(){this.listings$=new l.X(m)}getListings(){return this.listings$.asObservable().pipe((0,F.U)(this.listingsDeepCopy.bind(this)))}upsertListing(C){const R=this.listings$.getValue(),A=R.findIndex(x=>x.id===C.id);if(A>-1){const x=R.slice(0,A),f=R.slice(A+1);this.listings$.next([...x,C,...f])}else this.listings$.next([C,...this.listings$.getValue()])}getOneListing(C){return this.listings$.pipe((0,F.U)(R=>{const A=R.find(x=>x.id===C);if(!A)throw new Error("not found");return A}),(0,F.U)(this.listingDeepCopy))}listingDeepCopy(C){return JSON.parse(JSON.stringify(C))}listingsDeepCopy(C){return C.map(this.listingDeepCopy)}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},110:(I,O,n)=>{n.d(O,{B:()=>x});var l,c=new Uint8Array(16);function d(){if(!l&&!(l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(c)}const y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,F=function m(f){return"string"==typeof f&&y.test(f)};for(var p=[],S=0;S<256;++S)p.push((S+256).toString(16).substr(1));const R=function C(f,g,G){var D=(f=f||{}).random||(f.rng||d)();if(D[6]=15&D[6]|64,D[8]=63&D[8]|128,g){G=G||0;for(var $=0;$<16;++$)g[G+$]=D[$];return g}return function E(f){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,G=(p[f[g+0]]+p[f[g+1]]+p[f[g+2]]+p[f[g+3]]+"-"+p[f[g+4]]+p[f[g+5]]+"-"+p[f[g+6]]+p[f[g+7]]+"-"+p[f[g+8]]+p[f[g+9]]+"-"+p[f[g+10]]+p[f[g+11]]+p[f[g+12]]+p[f[g+13]]+p[f[g+14]]+p[f[g+15]]).toLowerCase();if(!F(G))throw TypeError("Stringified UUID is invalid");return G}(D)};var A=n(4650);let x=(()=>{class f{generate(){return R()}}return f.\u0275fac=function(G){return new(G||f)},f.\u0275prov=A.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},2134:(I,O,n)=>{n.d(O,{h:()=>l});class l{constructor(d){}}},2559:I=>{I.exports=function O(n,l){if(n===l)return!0;if(n&&l&&"object"==typeof n&&"object"==typeof l){if(n.constructor!==l.constructor)return!1;var c,d,y;if(Array.isArray(n)){if((c=n.length)!=l.length)return!1;for(d=c;0!=d--;)if(!O(n[d],l[d]))return!1;return!0}if(n.constructor===RegExp)return n.source===l.source&&n.flags===l.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===l.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===l.toString();if((c=(y=Object.keys(n)).length)!==Object.keys(l).length)return!1;for(d=c;0!=d--;)if(!Object.prototype.hasOwnProperty.call(l,y[d]))return!1;for(d=c;0!=d--;){var m=y[d];if(!O(n[m],l[m]))return!1}return!0}return n!=n&&l!=l}}}]);